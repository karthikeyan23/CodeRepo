<div class="container">
  <div class="row">
    <div class="col-md-5">
      <div class="panel-primary" *ngIf="joinned; else login">
        <div class="panel-title">
          <div class="panel-title-icon">
            <div class="display: block;">
              <img id="agent-avatar" class="panel-title-icon-img" src="../../assets/img/title-icon.png">
            </div>
          </div>
          <div class="panel-title-wrapper">
            <div class="panel-title-text">Bot1</div>
            <div class="panel-title-sub">Sub text</div>
          </div>
          <div class="panel-title-logoff">
            <span class="glyphicon glyphicon-cog" (click)="logout()"></span>
          </div>
        </div>
        <div #scrollMe class="panel-body">
          <ul class="chat">
            <li *ngFor="let c of chats">
              <div class="left clearfix" *ngIf="c.nickname===msgData.nickname; else rightchat">
                <!--  <span class="chat-img pull-left">
                            <img src="http://placehold.it/50/55C1E7/fff&text=ME" alt="User Avatar" class="img-circle" />
                          </span>-->
                <div class="chat-body clearfix">
                  <!-- <div class="header">
                    <strong class="primary-font">{{ c.nickname }}</strong>
                    
                  </div>-->
                  <div class="bubble-left">
                    {{ c.message }}
                    <div class="bubble-timestamp">
                      <small class=" text-muted">{{ c.updated_at | date: 'medium' }}</small>
                    </div>
                  </div>
                </div>
              </div>
              <ng-template #rightchat>
                <div class="right clearfix">
                  <!--<span class="chat-img pull-right">
                              <img src="http://placehold.it/50/FA6F57/fff&text=U" alt="User Avatar" class="img-circle" />
                            </span>-->
                  <div class="chat-body clearfix">
                    <!-- <div class="header">
                      
                       <strong class="pull-right primary-font">{{ c.nickname }}</strong> 
                    </div>-->
                    <div class="bubble-right">
                      {{ c.message }}
                      <div class="bubble-timestamp">
                        <small class="pull-right text-muted">{{ c.updated_at | date: 'medium' }}</small>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
          </ul>
        </div>
        <div class="panel-footer">
          <form (ngSubmit)="sendMessage()" #msgForm="ngForm">
            <div class="input-group">
              <input type="hidden" [(ngModel)]="msgData.userID" name="userID" />
              <input type="hidden" [(ngModel)]="msgData.nickname" name="nickname" />
              <input id="btn-input" type="text" [(ngModel)]="msgData.message" name="message" class="form-control input-sm" placeholder="Type your message here..."
                required="" autocomplete="off" />
              <span class="input-group-btn">
                <button type="submit" class="btn btn-warning btn-sm" id="btn-chat" [disabled]="!msgForm.form.valid">
                  Send</button>
              </span>
            </div>
            <div class="voice-button-div">
              <button type="button" [ngClass]="recognizing ? 'button2 fa fa-microphone' : 'button1 fa fa-microphone'" id="btn-voice" (mousedown)="startVoice()"
                (mouseup)="stopVoice()"></button>
            </div>
          </form>
        </div>
      </div>
      <ng-template #login>
        <div class="login-primary">
          <div class="login-wrapper">
            <h1 class="login-form-center">Login</h1>
            <form (ngSubmit)="loginUser()" #login="ngForm">
              <div class="form-group">
                <input type="text" class="form-control login-form" [(ngModel)]="newUser.userID" name="userID" placeholder="Email ID" required=""/>
                <input type="text" class="form-control login-form" [(ngModel)]="newUser.nickname" name="nickname" placeholder="Nickname"
                  required="" />
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-success login-form-button" [disabled]="!login.form.valid">Login</button>
              </div>
            </form>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>